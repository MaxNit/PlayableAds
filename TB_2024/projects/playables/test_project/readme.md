### Builder
Возможно понадобится node v12
1. npm run dev - запускает dev сборку (localhost:8000 и localhost:8000/device.html)
2. localhost:8000/device.html - вспомогательная страница для тестирования
3. npm run build - запуск сборки плейбла под сетки. У каждой сетки есть определенные ограничения по весу, если вес превышает допустимые параметры - в консоль выведется соотвествующее прдупреждение.
4. npm run spritesheet - сборка спрайтшитов из картинок (см. нижей)

YouApplication (при желаниее можно переименовать) и SuperApp - две основные точки взаимодействия билдера
Так же содержат логику смены ориентации и ресайза.

### YouApplication (и ./Core/Application) содержит ряд методов и свойства
1. run() - запуск геймплея
2. finish() - вызвать в конце всего геймплея, после всех анимаций
3. retry() - вызвать, когда есть функционал с retry (т.е. есть перезапуск всего сценария)
4. skipAd() - вызвать, при пропуске рекламы, моментальный переход к пекшоту
5. inStore() - вызвать, когда игрок должен перейти в стор (например, когда нажал на кнопку install)
6. resizeApp() - вызывать не нужно, вызывается при смене ориентации и ресайзе
7. width/height - ширина и высота холста посе кропа
8. origWidth/origHeight - ширина и высота холста до кропа (1390 на 640 или наоборот)
9. isPortrait/isLandscape
10. ratio - соотношение сторон
11. landscapeRatio - отношение сторон большей к меньшей


### Размеры экранов
1. Размеры экранов, на которые мы ориентируемся см. в const.js - window.RATIO.
2. Базовая логика адаптации холста под размер экрана уже реализована в шаблоне
3. У Application есть вспомогательные метод ratioLess. Например: ratioLess('sm') - true, если размер экрана меньше размера 'sm'


### Версии/настройки
1. Желательно самые важные настройки плейбла выносить в const.js (например: конфиг сетапа игрового поля, цели и их количество)
2. В settings.js константа GLOBAL_SETTINGS_PLAYABLE прокидывается в одноименную глобальную переменную для prod. версии и в GLOBAL_SETTINGS_PLAYABLE_DEV для dev. версии (см. const.js, при изменениее сервер нужно перезапустить).
3. Вся логика с версиями реализуется через константы в const.js (Константа VERSION_ID переключает версии для dev. режима)
4. В settings.js можно докинуть/заменить необходимые библиотеки

Самые рспростараненные версии:
1. Фулл версия с пекшотом в конце.
2. Версия с мискликом.  Когда в какой-то момент тап переводит в стор. После тапа нужно включить пекшот, если он есть
3. Авторедирект - то же самое, что и 1 версия, но с автоматическим перенаправением в стор после появления пекшота (1-2 секунды)


### Графика и Spritesheet
Структура:
img/base - основной набор графики
img/langs - набор графики с текстом

Вся графика в формате base64 попадает в переменную window.sprites.
Пример получения текстуры: utils.getTexture('demo') - возьмет demo.png из папки base или langs


#### Команда npm run spritesheet
1. Запускает сборку спрайтшитов; Dсе папки с имененм img/base/_* (например: _icons) соберутся в spritesheet. Папка с имененм __* будет игнорироваться - полезно, если конкретный набор графики уже собран и сжат, что бы не перезаписать spritesheet
2. Все spritesheets попадают в переменную window.spritesheets
3. Пример получения текстуры: utils.getTexture('icons/demo')


### Звуки
В папке sounds, попадает в переменную window.b64. Например: b64.music.src
Кнопка mute должна отображаться слева внизу и реагировать на тап, но она нужна только для mraid и dev. режима.
Как проверить необходимость кнопки отключения звука:
1. playableEnv.params && playableEnv.params.showMuteButton
или
2. playableEnv.apiName == 'default' || 'mraid'
Для удобства в шаблоне имеется инструмент для работы со звуком (см. пример в YouApplication)

### Дополнительно

window.is_adwords - глобальная переменная
1. На adwords не используем звуки
2. В финале на Adwords не должно быть зацикленных анимаций


Для ряда сеток нужна кнопка перехода в стор на протяжении всего геймлпея, для всех остальных мы эту кнопку прячем.
Проверить необходимость это кнопки можно следующим условием
playableEnv.params && playableEnv.params.showInstallButton